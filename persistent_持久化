一. Redis 持 久 化 机 制 :


    异步方式 将内存中的数据 保存在磁盘中.

    <1> 快 照 方 式 : 定时保存到磁盘中.

            无法 100% 保证数据不丢失.

            但性能更好.


二. Snapshotting (快照) 默 认 方 式 :


    定时的将内存中的内容,以 rdb文件格式,写到磁盘中.(当前redis目录)

    <1> 配置   save

        save 900 1  #900秒内如果超过1个key被修改, 则发起快照保存.

        save 600 10 #600秒内如果超过10个key被修改,则发起快照保存.

        save 60  10000 #60秒内如果超过10000个key被修改,则发起快照保存.

        以上为默认,修改到 /etc/redis/redis.conf 用vim :/900直接找到.


    <2> 如果在 设置的时间段内,服务宕机,电脑关机,那么达不到保存数据的时间

        数据是无法被保存到磁盘中的.


三. Append-only file (aof方式) : 


    <1> 配置 appendfile no 改为 yes  
    
        启用aof持久化方式

    <2> 配置 appendfsync always 
    
        收到写命令就立即写入磁盘,最慢,但是保证完全的持久化.

    <3> 配置 appendfync everysec

        每秒钟写入磁盘一次,在性能和持久化方面做了很好的折中.
    
    <4> 配置 appendfsync no 

        完全以来os,操作系统空闲时写入,性能最好,持久化没保证.

        系统有空就做,如果一天都没空,一旦宕机,同样丢失,没有谱.
